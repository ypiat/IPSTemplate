@page "/bookcopy/edit/{ItemId?}"

@using BusinessLibrary.BO.BookCopy
@using Dal.Models
@using IPSTemplate.BusinessLibrary.BO.Author;
@using IPSTemplate.BusinessLibrary.BO.Publisher;


@using IPSTemplate.UI.Blazor.Features.Author

@inherits EditView<TEBookCopyBO, TEBookCopy>

@if (ViewModel?.Model is null)
{
    <IPSLoader />
    return;
}

@if (Error is not null)
{
    @Error
    return;
}


<IPSForm Model=ViewModel OnSaved=@(() => ItemSaved.InvokeAsync())>
    <FormFields>
        @*<IPSGridColumn Id="Id" Field=@nameof(ViewModel.Model.BookID) Visible=false />*@
       @*<IPSFormField Property=@ViewModel.GetProperty(() => ViewModel.Model.BookID) />*@
        @*<IPSFormField  Property=@TEBookCopyInfo.BookName) />*@
        @*<IPSMultiSelect Property=@ViewModel.GetProperty(() => ViewModel.Model.AuthorIds) OnRead="GetAuthors"
                        TItem="TEAuthorInfo" TValue="Guid" TextField="ShowAs" ValueField="Id" />*@
        @*<IPSButton Color="Color.Secondary" OnClick="(() => windowVisible = true)">Add new author</IPSButton>*@
        <IPSComboBox @ref=cbxPublisher Label="Založba"  TItem=TEPublisherInfo TValue=Guid?
                     TextField=@nameof(TEPublisherInfo.Name)
                     ValueField=@nameof(TEPublisherInfo.Id)
                     Property=@ViewModel.GetProperty(() => ViewModel.Model.PublisherID)
                     OnRead="GetPublishers" />

        @*<IPSComboBox @ref=cbxBook Label="Book" TItem=TEBookInfo TValue=Guid?
                     TextField=@nameof(TEBookInfo.Name)
                     ValueField=@nameof(TEBookInfo.Id)
                     Property=@ViewModel.GetProperty(() => ViewModel.Model.DookID)
                     OnRead="GetBooks"
                     Placeholder="Žanr" />*@
        <IPSFormField Property=@ViewModel.GetProperty(() => ViewModel.Model.PublishedYear) />
    </FormFields>
    <FormButtons>
        <IPSFormSaveButton />
    </FormButtons>
</IPSForm>




